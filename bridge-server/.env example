# API Key轮换功能配置文件
# 请根据需要修改以下配置项

# ===========================================
# 基础配置
# ===========================================

# 是否启用多账号轮换功能
MULTI_ACCOUNT_ENABLED=true

# Gemini API密钥（单账号模式）
# GEMINI_API_KEY=your_api_key_here

# ===========================================
# 轮换策略配置
# ===========================================

# 轮换策略: round-robin(轮询) | random(随机) | least-used(最少使用优先)
GEMINI_ROTATION_STRATEGY=round-robin

# 每个API Key的最大请求次数（可选）
# GEMINI_MAX_REQUESTS_PER_KEY=1000

# 轮换间隔时间（毫秒，可选）
# GEMINI_ROTATION_INTERVAL=60000

# 是否启用回退机制
GEMINI_ENABLE_FALLBACK=true

# 最大连续失败次数
GEMINI_MAX_CONSECUTIVE_FAILURES=10

# 冷却期时间（毫秒）
GEMINI_COOLDOWN_PERIOD=300000

# 持久化文件路径
GEMINI_PERSISTENCE_FILE=./data/rotation-state.json

# ===========================================
# 多账号配置（JSON格式）
# ===========================================

# 多账号配置 - 统一使用JSON格式，避免配置混乱
# 包含完整的账号信息：id、name、apiKey、quota、status
GEMINI_MULTI_ACCOUNTS='{"enabled":true,"accounts":[{"id":"ssj","name":"主账号ssj","apiKey":"AIza ","quota":{"daily":100,"monthly":3000},"status":"active"},{"id":"mycola","name":"备用账号mycola","apiKey":"AIza ","quota":{"daily":100,"monthly":3000},"status":"active"}]}'

# ===========================================
# 服务器配置
# ===========================================

# 服务器端口
PORT=8765

# 调试模式
DEBUG=false

# 日志级别
LOG_LEVEL=info

# 默认模型
GEMINI_MODEL=gemini-2.5-pro

# 回退模型 当gemini-2.5-pro模型请求失败时，会自动切换为gemini-2.5-flash
GEMINI_FALLBACK_MODEL=gemini-2.5-flash

# ===========================================
# 使用说明
# ===========================================

# 1. 单账号模式：
#    - 设置 MULTI_ACCOUNT_ENABLED=false
#    - 配置 GEMINI_API_KEY
#
# 2. 多账号模式（推荐）：
#    - 设置 MULTI_ACCOUNT_ENABLED=true
#    - 配置 GEMINI_MULTI_ACCOUNTS（JSON格式）
#    - JSON格式包含完整的账号信息：id、name、apiKey、quota、status
#
# 4. 轮换策略说明：
#    - round-robin: 按顺序轮换使用
#    - random: 随机选择可用的API Key
#    - least-used: 优先使用请求次数最少的API Key
#
# 5. 故障恢复：
#    - 当API Key连续失败达到最大次数时，会进入冷却期
#    - 冷却期结束后自动恢复使用
#    - 支持自动故障转移到其他可用的API Key
#
# 注意：请妥善保管您的API密钥，不要将其提交到版本控制系统中